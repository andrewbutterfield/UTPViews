\section{ Denotation BITS}

\RLEQNS{
  \DL(P) &\defs& P \land \setof{in|g|out} & \elabel{DL-def}
}
\RLEQNS{
  \LE(P) &\defs& P \land [in|g|out] & \elabel{EL-def}
}
\RLEQNS{
   P^0 & \defs& \Skip           & \elabel{seq-0}
\\ P^{i+1} & \defs& P \seq P^i  & \elabel{seq-i-plus-1}
\\ \WWW(P) & \defs  & \bigvee_{i \in \Nat} P^i &\elabel{WWW-as-NDC}
}%
\RLEQNS{
   \W(P) &\defs& \DL(\LE(\WWW(P))) & \elabel{W-def}
}
\RLEQNS{
   A(E|a|N)
   &\defs&
   E \subseteq ls \land a \land ls'=(ls\setminus E) \cup N
   & \elabel{A-def}
}
\RLEQNS{
  \catom a
  &\defs& \W(A(in|a|out))) & \elabel{sem:atomic}
}
\RLEQNS{
   P \cseq Q
   &\defs&
   \W(P[g_{:1},\ell_g/g,out] \lor Q[g_{:2},\ell_g/g,in])
   & \elabel{sem:seq}
}
\RLEQNS{
   P \parallel Q
   &\defs&
   \W(~A(in|ii|\ell_{g1},\ell_{g2}) \lor {}
   & \elabel{sem:par}
\\&& \phW P[g_{1::},\ell_{g1},\ell_{g1:}/g,in,out] \lor {}
\\&& \phW Q[g_{2::},\ell_{g2},\ell_{g2:}/g,in,out] \lor {}
\\&& \phW A(\ell_{g1:},\ell_{g2:}|ii|out)~)
}
\RLEQNS{
   P + Q
   &\defs&
   \W(~P[g_{1}/g] \lor Q[g_{2}/g]~)
   & \elabel{sem:NDC}
}
\RLEQNS{
   P^*
   &\defs&
   \W(~A(in|ii|\ell_{g:}) \lor {}
   & \elabel{sem:star}
\\ && \phW A(\ell_{g:}|ii|\ell_g) \lor {}
\\ && \phW A(\ell_{g:}|ii|out) \lor {}
\\ && \phW P[\g{::},\ell_g,\ell_{g:}/g,in,out]~)
}
\RLEQNS{
   P \dcond c Q
   &\defs&
   \W(~A(in|c \land ii|\ell_{g1}) \lor {}
   & \elabel{sem:cond}
\\ && \phW A(in|\lnot c \land ii|\ell_{g2}) \lor {}
\\ && \phW P[g_{1:},\ell_{g1}/g,in] \lor {}
\\ && \phW Q[g_{2:},\ell_{g2}/g,in]~)
\\ && {} \land_? [\ell_{g1}|\ell_{g2}] \mbox{ \textit{\small necessary?}}
}
\RLEQNS{
   c \ddo P
   &\defs&
   \W(~A(in|ii|\ell_{g:}) \lor {}
   & \elabel{sem:iter}
\\ &&\phW A(\ell_{g:}|\lnot c \land ii|out) \lor {}
\\ &&\phW A(\ell_{g:}|c \land ii|\ell_g) \lor {}
\\ &&\phW P[\g{::},\ell_g,\ell_{g:}/g,in,out]~)
}

\subsection{Non-Det Choice (old)}

%
%%<*XXX-def-lhs>
%XXX-lhs
%%</XXX-def-lhs>
%
%%<*XXX-def-rhs>
%XXX-rhs
%%</XXX-def-rhs>
%
%%<*XXX-def-lbl>
%XXX-lbl
%%</XXX-def-lbl>
%
%%<*NDC-sem>
%\RLEQNS{
%   P + Q
%   &\defs&
%   [in|out] \land \W( P[g_{1}/g] \lor Q[g_{2}/g]~))
%   & \elabel{sem:NDC}
%}
%%</NDC-sem>
%
%%<*NDC-sem-old>
%\RLEQNS{
%   P + Q
%   &\defs&
%   [in|\ell_{g1}|\ell_{g2}|out] \land {}
%   & \elabel{sem:NDC}
%\\ && \W(\quad {}\phlor A(in|ii|\ell_{g1})
%\\ && \qquad\qquad {} \lor
%                     A(in|ii|\ell_{g2})
%\\ && \qquad\qquad {} \lor
%   P[g_{1:},\ell_{g1}/g,in]
%\\ && \qquad\qquad {} \lor
%   Q[g_{2:},\ell_{g2}/g,in]~))
%}
%%</NDC-sem-old>
%
%\RLEQNS{
%   \{in|g|out\}\varsigma
%   \land [in|\ell_{g1}|\ell_{g2}|out]\varsigma
%   && \eref{ndc-1-inv-ok}
%\\ {} \land A(in|ii|\ell_{g1})\varsigma
%   &\implies&
%   [in|\ell_{g1}|\ell_{g2}|out]'\varsigma
%\\ \{in|g|out\}\varsigma
%   \land [in|\ell_{g1}|\ell_{g2}|out]\varsigma
%   && \eref{ndc-2-inv-ok}
%\\ {} \land A(in|ii|\ell_{g2})\varsigma
%   &\implies&
%   [in|\ell_{g1}|\ell_{g2}|out]'\varsigma
%}
%
%
%\subsection{Templates}
%
%%<*XXX-bit>
%XXX-bit
%%</XXX-bit>
%
%\subsubsection{Equation Templates}
%
%%<*XXX-def-lhs>
%XXX-lhs
%%</XXX-def-lhs>
%
%%<*XXX-def-rhs>
%XXX-rhs
%%</XXX-def-rhs>
%
%%<*XXX-def-lbl>
%XXX-lbl
%%</XXX-def-lbl>
%
%%<*XXX-def>
%\RLEQNS{
%  XXX-lhs
%  &\defs&
%  XXX-rhs
%  & \elabel{XXX-lbl}
%}
%%</XXX-bit>
%
%%<*XXX-eqn>
%\RLEQNS{
%XXX-lhs
%&=&
%XXX-rhs
%}
%%</XXX-eqn>
